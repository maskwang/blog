---
title: 'php实现一种很简单的加密算法  '
id: 459
categories:
  - Php
  - 技术专栏
  - 编程语言
date: 2011-12-05 18:32:01
tags:
---

php实现一种很简单的加密算法

原理:
利用位运算符对字符串中指定的位进行置位。

$encrypt_org = "a";
$encrypt_key = "b";
$encrypt_str = $encrypt_org ^ $encrypt_key;
echo $encrypt_str."\n";        //经过加密的字符串
$un_encrypt_str = $encrypt_str ^ $encrypt_key;
echo $un_encrypt_str;        //解密字符串

最后结果输出为：a

实际应用：
function encrypt_encode($txt, $key)
{
srand((double)microtime() * 1000000);
$rand = rand( 1, 10000 );
$encrypt_key = md5( $rand );
$ctr = 0;
$tmp = '';
for($i = 0;$i &lt; strlen($txt); $i++)
{
$ctr = $ctr == strlen($encrypt_key) ? 0 : $ctr;
$tmp .= $encrypt_key[$ctr].($txt[$i] ^ $encrypt_key[$ctr++]);
}
$tmp = encrypt_key( $tmp, $key );
return base64_encode( $tmp );
}

function encrypt_decode($txt, $key)
{
$txt = base64_decode( $txt );
$txt = encrypt_key( $txt, $key );
$tmp = '';
for ($i = 0;$i &lt; strlen($txt); $i++)
{
$md5 = $txt[$i];
$tmp .= $txt[++$i] ^ $md5;
}
return $tmp;
}

function encrypt_key($txt, $encrypt_key)
{
$encrypt_key = md5($encrypt_key);
$ctr = 0;
$tmp = '';
for($i = 0; $i &lt; strlen($txt); $i++)
{
$ctr = $ctr == strlen($encrypt_key) ? 0 : $ctr;
$tmp .= $txt[$i] ^ $encrypt_key[$ctr++];
}
return $tmp;
}

$str = "我是中国人";
$key = "123";
echo "&lt;br&gt;";
$encode = encrypt_encode( $str,$key );
echo "加密结果：".$encode;
echo "&lt;br&gt;";
$decode = encrypt_decode( $encode,$key );
echo "解密结果：".$decode;

-------------------------------------------------------------
结果：
加密结果：BspW1VXEU5BRhVGNB7kHqgHGDZA=
解密结果：我是中国人