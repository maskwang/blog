---
title: 【原创】从刚删除的域名中发现好的域名
id: 260
categories:
  - Php
  - 技术专栏
  - 编程语言
date: 2011-08-23 22:56:37
tags:
---

最近一直想申请个好的域名，然后就去刚过期的域名中去淘， 烦人的是每次都要复制粘贴…… 重复操作。 本人比较懒， 就写了个php脚本。

代码如下：

&lt;meta charset="GBK"&gt;
&lt;title&gt;检查域名注册情况(包括前天、昨天、今天)&lt;/title&gt;
&lt;?php
set_time_limit(0);
ini_set('memory_limit','256M');

//网上自动抓取过期域名（前天、昨天、今天）
$today    = 'http://www.cnnic.net.cn/download/registar_list/1todayDel.txt';
$yestoday = 'http://www.cnnic.net.cn/download/registar_list/2todayDel.txt';
$qiantian = 'http://www.cnnic.net.cn/download/registar_list/3todayDel.txt';

$data  = file_get_contents($today);
$data .= file_get_contents($yestoday);
$data .= file_get_contents($qiantian);
$data  = str_replace('[', '', $data);
$data  = str_replace(']', ',', $data);
$data  = str_replace('\r\n', '', $data);
$param = explode(',', $data);

if ($param) {
foreach ($param as $k =&gt; $v) {
$v=preg_replace('/\n|\r\n/','',$v);
$strs = explode(".", $v, 2);
checkDomain($strs[0], '.'.$strs[1]);
}
}

echo '&lt;br /&gt; 执行完成';

//检查域名是否被注册
function checkDomain($domain, $select = '.com')
{
if (!$domain) {
die('参数错误！');
}
//$domain = str_replace(' ', '', $domain);
$sql = 'http://www.checkdomain.com/cgi-bin/checkdomain.pl?domain='.$domain.$select;

$html = file_get_contents($sql);
$checked = strpos($html,"has already been registered");
if($checked&lt;&gt;null){
echo $domain.$select.'已经被注册';
} else {
echo $domain.$select.'可以注册';
//log
wFile($domain.$select.'可以注册', 'domain.txt', 1);
}
echo '&lt;br /&gt;';
}

/**
* 调试写文件
*
* @param mix $msg        需要写的内容
* @param mix $name     文件名
* @param int $mode     是否追加写入  1=追加 0=不追加
*
* @return void
*/
function wFile($msg, $name = 'debug_file', $mode = 0) {
if (true === empty($name)) {
$name = 'debug_file';
}

if (false === is_string($msg)) {
$msg = json_encode($msg);
}

if (!$mode) {
file_put_contents($name, $msg);
} else {
$fp = fopen($name, 'ab');
fwrite($fp, $msg . PHP_EOL);
fclose($fp);
}
}
?&gt;

由于域名比较多，执行时间会有点长，脚本执行完，会在当前目录生成一个domain.txt文件， 里面就是可以注册的域名， 去里面淘好的域名吧~

写了不好，别喷~ 呵呵     原创转载请注明出处。