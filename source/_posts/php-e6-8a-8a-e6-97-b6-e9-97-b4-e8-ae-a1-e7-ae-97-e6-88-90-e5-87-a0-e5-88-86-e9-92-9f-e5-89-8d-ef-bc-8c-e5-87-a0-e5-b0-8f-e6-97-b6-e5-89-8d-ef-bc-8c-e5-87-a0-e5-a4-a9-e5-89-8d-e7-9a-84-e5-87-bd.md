---
title: php把时间计算成几分钟前，几小时前，几天前的函数
id: 62
categories:
  - Php
  - 技术专栏
date: 2011-08-22 22:33:57
tags:
---

<div id="blog_text">
<div>php把时间计算成几分钟前，几小时前，几天前的函数</div>
<div>2009-12-11 18:34</div>
刚用到，简单写了个，凑合着用吧。

&lt;?php #time.inc.php by wangfengkun
//计算时间，规则如下，如果一小时内，显示分钟，如果大于1小时小于1天显示小时，如果大于天且小于3天，显示天数，否则显示日期时间
function time_tran($the_time){
<wbr> <wbr> $now_time = date("Y-m-d H:i:s");
<wbr> <wbr> $now_time = strtotime($now_time);
<wbr> <wbr> $show_time = strtotime($the_time);
<wbr> <wbr> $dur = $now_time - $show_time;
<wbr> <wbr> if($dur &lt; 60){
<wbr> <wbr> <wbr> return $dur.'秒前';
<wbr> <wbr> }else{
<wbr> <wbr> <wbr> if($dur &lt; 3600){
<wbr> <wbr> <wbr> <wbr> return floor($dur/60).'分钟前';
<wbr> <wbr> <wbr> }else{
<wbr> <wbr> <wbr> <wbr> if($dur &lt; 86400){
<wbr> <wbr> <wbr> <wbr> <wbr> return floor($dur/3600).'小时前';
<wbr> <wbr> <wbr> <wbr> }else{
<wbr> <wbr> <wbr> <wbr> <wbr> if($dur &lt; 259200){//3天内
<wbr> <wbr> <wbr> <wbr> <wbr> <wbr> return floor($dur/86400).'天前';
<wbr> <wbr> <wbr> <wbr> <wbr> }else{
<wbr> <wbr> <wbr> <wbr> <wbr> <wbr> return $the_time;
<wbr> <wbr> <wbr> <wbr> <wbr> }
<wbr> <wbr> <wbr> <wbr> }
<wbr> <wbr> <wbr> }
<wbr> <wbr> }
}
?&gt;</wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr>

<span style="color: #ff0000;">注：这里没有考虑到时区。</span>

后修改如下：

function time_tran($the_time){
<wbr> <wbr> $now_time = date("Y-m-d H:i:s",time()+8*60*60);
<wbr> <wbr> $now_time = strtotime($now_time);
<wbr> <wbr> $show_time = strtotime($the_time);
<wbr> <wbr> $dur = $now_time - $show_time;
<wbr> <wbr> if($dur &lt; 0){
<wbr> <wbr> <wbr> return $the_time;
<wbr> <wbr> }else{
<wbr> <wbr> <wbr> if($dur &lt; 60){
<wbr> <wbr> <wbr> <wbr> return $dur.'秒前';
<wbr> <wbr> <wbr> }else{
<wbr> <wbr> <wbr> <wbr> if($dur &lt; 3600){
<wbr> <wbr> <wbr> <wbr> <wbr> return floor($dur/60).'分钟前';
<wbr> <wbr> <wbr> <wbr> }else{
<wbr> <wbr> <wbr> <wbr> <wbr> if($dur &lt; 86400){
<wbr> <wbr> <wbr> <wbr> <wbr> <wbr> return floor($dur/3600).'小时前';
<wbr> <wbr> <wbr> <wbr> <wbr> }else{
<wbr> <wbr> <wbr> <wbr> <wbr> <wbr> if($dur &lt; 259200){//3天内
<wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> return floor($dur/86400).'天前';
<wbr> <wbr> <wbr> <wbr> <wbr> <wbr> }else{
<wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> return $the_time;
<wbr> <wbr> <wbr> <wbr> <wbr> <wbr> }
<wbr> <wbr> <wbr> <wbr> <wbr> }
<wbr> <wbr> <wbr> <wbr> }</wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr>

</div>